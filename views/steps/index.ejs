<%- include('../partials/header') %>
<div class="container mt-5">
  <div class="row mb-4">
    <div class="col-md-8">
      <h2>ğŸ“Š LÃ©pÃ©sek</h2>
      <p class="lead text-muted">Ã–sszes lÃ©pÃ©s: <strong class="text-info"><%= total %></strong></p>
    </div>
    <div class="col-md-4 text-end">
      <a class="btn btn-success btn-lg" href="/steps/new">â• Ãšj bejegyzÃ©s</a>
    </div>
  </div>

  <% if (!steps || steps.length === 0) { %>
    <div class="alert alert-info text-center py-5">
      <h5>Nincsenek bejegyzÃ©sek</h5>
      <p>Kezdj el Ãºj bejegyzÃ©s hozzÃ¡adÃ¡sÃ¡val!</p>
    </div>
  <% } else { %>
    <div class="table-responsive shadow-lg rounded">
      <table class="table table-striped table-hover mb-0">
        <thead class="table-dark">
          <tr>
            <th>ğŸ“… DÃ¡tum</th>
            <th>ğŸ‘Ÿ LÃ©pÃ©sszÃ¡m</th>
            <th class="text-center">âš™ï¸ MÅ±veletek</th>
          </tr>
        </thead>
        <tbody>
          <% function localDate(d) { const dt = (typeof d === 'string') ? new Date(d) : d; const y = dt.getFullYear(); const m = String(dt.getMonth() + 1).padStart(2, '0'); const day = String(dt.getDate()).padStart(2, '0'); return `${y}-${m}-${day}`; } %>
          <% steps.forEach(function(s) { %>
          <tr>
            <td><strong><%= localDate(s.date) %></strong></td>
            <td><span class="badge bg-info"><%= s.steps %></span></td>
            <td class="text-center">
              <a class="btn btn-sm btn-primary" href="/steps/<%= s.id %>/edit">âœï¸ Szerkeszt</a>
              <form method="POST" action="/steps/<%= s.id %>/delete" style="display:inline-block" onsubmit="return confirm('Biztosan tÃ¶rlÃ¶d?');">
                <button class="btn btn-sm btn-danger" type="submit">ğŸ—‘ï¸ TÃ¶rÃ¶l</button>
              </form>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } %>

  <div class="row mt-4 g-2">
    <div class="col-md-6">
      <a href="/steps/calendar/view" class="btn btn-outline-secondary btn-block w-100">ğŸ“… NaptÃ¡r nÃ©zet</a>
    </div>
    <div class="col-md-6">
      <a href="/steps/chart/view" class="btn btn-outline-secondary btn-block w-100">ğŸ“ˆ Grafikon nÃ©zet</a>
    </div>
  </div>
</div>
<%- include('../partials/footer') %>